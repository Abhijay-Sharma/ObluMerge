{%extends 'quotations/base.html'%}
{% block content %}

<style>

    h2 {
      text-align: center;
      margin-bottom: 5%;
      color:white;
    }

    form {
      display: flex;
      flex-direction: column;
      align-items: center; /* centers horizontally */
      justify-content: center;
      gap: 15px;
      width: 100%;
    }

    form table {
      margin: 0 auto; /* centers table itself */
    }

    form textarea {
      width: 100%;
      max-width: 600px; /* limit form width on large screens */
    }

    form button {
      align-self: center;
    }

    /* Responsive */

    @media (max-width: 900px) {
      .table-container {
        padding: 0 20px;
      }

      .table {
        width: 100%;
      }

      textarea  {
        width: 100%;
        box-sizing: border-box;
      }

      form {
        padding: 0 20px;
      }

      button {
        margin-right: 10%;
        display: block;
      }
    }

    @media (max-width: 768px) {
      .table-container {
        padding: 0 20px;
      }

      .table {
        font-size: 0.9rem;
      }

      .table th,
      .table td {
        padding: 10px 8px;
      }

      button {
        margin-right: 10%;
        display: block;
      }
    }


    @media (max-width: 500px) {
      .table-container {
        padding: 0 20px;
      }

      table {
        width: 100%;
        font-size: 0.85rem;
      }

      th,
      td {
        padding: 8px 5px;
        text-align: left;
      }

      textarea {
        width: 100%;
        box-sizing: border-box;
      }

      button {
        margin-top: 10px;
        display: block;
      }

      form {
        padding: 0 10px;
      }
    }
</style>

<h2>Request Price Change for Quotation #{{ quotation.id }}</h2>

<form method="post" >
  {% csrf_token %}
  <table class="table-container" style="color: white;">
    <tr>
      <th style="background-color: #595555 !important;">Product</th>
      <th style="background-color: #595555 !important;">Current Price</th>
      <th style="background-color: #595555 !important;" >Requested New Price</th>
    </tr>
    {% for item in items %}
    <tr>
      <td style="background-color: #595555;">{{ item.product.name }}</td>
      <td style="background-color: #595555;">{{ item.product.price_per_unit }}</td>
      <td style="background-color: #595555;">
          <input type="number" step="0.01" name="new_price_{{ item.id }}" class="form-control">
      </td>
    </tr>
    {% endfor %}
  </table>

  <label>Reason:</label>
  {{ form.reason }}
  <br>
  <button type="submit" class="btn btn-primary">Submit Request</button>
</form>
{% endblock %}