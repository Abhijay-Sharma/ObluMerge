<!-- dead_stock_dashboard.html
this is dashboard that display the dead stock product (not sold in long time-->

{% extends 'inventory/base.html' %}

{% block content %}

<style>

     .date-filter-form {
          display: flex;
          justify-content: center;
          align-items: center;
          gap: 10px;
          flex-wrap: wrap;
          margin: 50px auto;
        }

        .date-filter-form label {
          font-weight: 500;
        }

        .date-filter-form input[type="date"] {
          padding: 5px 10px;
          border: 1px solid #ccc;
          border-radius: 6px;
        }

        .date-filter-form .btn {
          padding: 6px 16px;
          border-radius: 6px;
        }

        .summary-card {
            flex: 0 0 85%;
            max-width: 100%;
            max-height: 100%;
            padding: 5px 2px;
            box-sizing: border-box;
            text-align: center;

          }

          .summary-card h5 {
            font-size: 1rem;
          }

          .summary-card h3 {
            font-size: 0.9rem;
          }

        @media (max-width: 768px) {
          .row.mb-4.justify-content-center {
            display: flex;
            flex-wrap: nowrap;
            align-items: centre;
            overflow-x: auto;
            padding: 0 70px;
            margin: 0;
            scroll-behavior: smooth
          }

          .summary-card {
            flex: 0 0 85%;
            max-width: 90%;
            max-height: 80%;
            padding: 5px 2px;
            box-sizing: border-box;
            text-align: center;
          }

          .summary-card h5 {
            font-size: 0.7rem;
          }

          .summary-card h3 {
            font-size: 0.8rem;
          }
        }



        @media (max-width: 420px) {
          .row.mb-4.justify-content-center {
            display: flex;
            flex-wrap: nowrap;
            justify-content: flex-start;
            align-items: stretch;
            overflow-x: auto;
            gap: 4px;
            padding: 0 70px;
            margin-left: 0 !important;
            margin-right: 0 !important;
            scroll-behavior: smooth;
          }

          .summary-card {
            max-width: 100%;
            text-align: center;
          }

          .summary-card h5 {
            font-size: 0.7rem;
          }

          .summary-card h3 {
            font-size: 0.6rem;
          }
        }

        @media (max-width: 360px) {

          h2{
            font-size: 1rem;
          }
          .row.mb-4.justify-content-center {

            align-items: center;
            justify-content: center;
            gap: 8px;
            overflow-x: hidden;
            padding: 0;
            margin: 0;
          }

          .summary-card {
            max-width: 100%;
            text-align: center;
          }

          .summary-card h5 {
            font-size: 0.85rem;
          }

          .summary-card h3 {
            font-size: 1rem;
          }
        }


</style>

<div class="container mt-4">
  <h2 style="color: white;">ðŸ§Š Dead Stock Dashboard</h2>

<form method="get" class="date-filter-form" style="display:flex; gap:10px; align-items:center;">
  <label for="from">From:</label>
  <input type="date" id="from" name="from" value="{{ from_date|date:'Y-m-d' }}" required>

  <label for="to">To:</label>
  <input type="date" id="to" name="to" value="{{ to_date|date:'Y-m-d' }}" required>

  <button type="submit" class="btn btn-primary">Apply</button>
</form>

  <div class="row mb-4 justify-content-center">
      <div class="col-md-3 col-6">
        <div class="card summary-card bg-warning text-dark shadow-sm">
          <div class="card-body text-center">
            <h5>Total Dead Products</h5>
            <h3>{{ dead_stock |length }}</h3>
          </div>
        </div>
      </div>
  </div>



  <table class="table table-striped">
    <thead>
      <tr>
        <th>Product Name</th>
        <th>Quantity</th>
        <th>Value</th>
        <th>Last Sold</th>
      </tr>
    </thead>
    <tbody>
      {% for item in dead_stock %}
        {% if item.quantity %}
          <tr>
            <td>{{ item.name }}</td>
            <td>{{ item.quantity }}</td>
            <td>{{ item.value }}</td>
            <td>{% if item.last_sold %}{{ item.last_sold }}{% else %}<i>Never Sold</i>{% endif %}</td>
          </tr>
        {% endif %}
      {% empty %}
      <tr><td colspan="4" class="text-center">âœ… No Dead Stock Found!</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}